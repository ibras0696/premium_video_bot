# Premium Buy Video Bot

## Стек технологий
- Python 3.12
- Aiogram (Telegram Bot API)
- APScheduler (планировщик задач)
- SQLAlchemy (ORM)
- SQLite
- Yookassa (интеграция платежей)
- Docker / Docker Compose

## Описание
Premium Buy Video Bot — это телеграм-бот для продажи подписок на доступ к закрытым группам и видео-материалам. Поддерживает реферальную систему, автоматическую проверку платежей, управление подписками и интеграцию с ЮKassa.

### Основные возможности
- Покупка подписки на разные тарифы (base, advanced, exclusive, all)
- Автоматическое добавление/удаление пользователей из групп
- Проверка и обработка платежей через Yookassa
- Реферальная система с начислением баллов
- Админ-панель для управления пользователями и подписками
- Поддержка асинхронных операций

## Структура проекта
- `main.py` — точка входа, запуск бота
- `config.py` — конфигурация, переменные окружения
- `database/` — работа с БД (модели, CRUD)
- `handlers/` — обработчики команд и событий Telegram
- `keyboards/` — inline и reply клавиатуры
- `middlewares/` — промежуточные слои (логирование, проверки)
- `services/` — интеграция с Yookassa
- `states/` — состояния FSM для aiogram
- `utils/` — вспомогательные функции и тексты сообщений
- `tests/` — тесты для основных функций

## Переменные окружения
Создайте файл `.env` в корне проекта и добавьте:
```
ADMIN_IDS=123456789,987654321
GROUP_IDS=1111111,2222222,3333333,4444444
TOKEN_BOT=ваш_токен_бота
REFFER_LINK=https://t.me/YourBot?start=
YOOKASSA_SHOP_ID=ваш_id_магазина
YOOKASSA_SECRET_KEY=ваш_секретный_ключ
BASE_URL=https://t.me/YourBot
```

## Запуск локально
1. Установите зависимости:
   ```
   pip install -r requirements.txt
   ```
2. Запустите бота:
   ```
   python main.py
   ```

## Запуск через Docker Compose
1. Соберите и запустите контейнер:
   ```
   docker-compose up --build
   ```
2. Бот будет запущен в контейнере `prem_bot`.

## Тестирование
В проекте реализованы асинхронные тесты (pytest):
```
pytest --asyncio-mode=strict


---

**Ibras0696:** GitHub Copilot

